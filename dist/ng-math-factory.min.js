app.factory("mathFactory",function(minumSquare){var methods_factory=[{name:"AJ de curvas",sub:[{name:"Mínimos cuadrados",in:"xy"},{name:"Interpolación lineal",in:"xy"}],factory:"minumSquare"},{name:"5 Métodos",sub:[{name:"Punto fijo",in:"formula"},{name:"Bisección",in:"formula"},{name:"Newton Raphson",in:"formula"},{name:"Regla falsa",in:"formula"}]},{name:"Matriz",sub:[{name:"Gauss Jordan",in:"matriz"}]}];return{solution:function(methods,input,callback){for(var i=0;i<methods_factory.length;i++)if(methods.module===methods_factory[i].name){eval(methods_factory[i].factory).options(input,methods.sub,function(e,a){callback(e,a)});break}},getMethods:function(){return methods_factory}}}),app.factory("minumSquare",function(){var e={options:{tooltip:{style:{padding:10,fontWeight:"bold"}}},series:[{name:"Puntos",data:[1,2,3,4,5,6],type:"scatter",id:"series-0"},{name:"R",data:[3,1],type:"line",id:"series-1"}],title:{text:"Mínimos cuadrados"},useHighStocks:!1},a=function(a){for(var o,l,s,u,t=a.length,v={solveTable:[{x:"X",y:"Y",a:"X * Y",b:"χ²",c:"a + b X",d:"Y - Ŷ"}],solveSum:[{symbol:"Σχ:",value:0},{symbol:"ΣY:",value:0},{symbol:"Σ(X * Y):",value:0},{symbol:"Σ(χ²):",value:0},{symbol:"Σ(Y - Ŷ):",value:0}],solveAB:[],solveR:""},m=0,n=0;n<t;n++)""===a[n].x&&(a[n].x=0),""===a[n].y&&(a[n].y=0),o=a[n].x*a[n].y,l=Math.pow(a[n].x,2),s=o+(l+a[n].x),u=a[n].y-s,m+=Math.pow(a[n].y,2),v.solveTable.push({x:a[n].x,y:a[n].y,a:o,b:l,c:s,d:u});for(n=1;n<v.solveTable.length;n++)v.solveSum[0].value+=v.solveTable[n].x,v.solveSum[1].value+=v.solveTable[n].y,v.solveSum[2].value+=v.solveTable[n].a,v.solveSum[3].value+=v.solveTable[n].b,v.solveSum[4].value+=v.solveTable[n].d;v.solveAB[1]=(t*v.solveSum[2].value-v.solveSum[0].value*v.solveSum[1].value)/(t*v.solveSum[3].value-Math.pow(v.solveSum[0].value,2)),v.solveAB[0]=(v.solveSum[1].value+v.solveAB[1]*v.solveSum[0].value)/t;var i=v.solveSum[2].value,r=v.solveSum[0].value,h=v.solveSum[1].value,c=v.solveSum[3].value,d=(c-Math.pow(r,2)/t)*(m-Math.pow(h,2)/t);v.solveR=(i-r*h/t)/Math.sqrt(d,2),v.solveR2=Math.pow(v.solveR,2),v.graphics=[];var y=[],b=[],p=[];for(n=1;n<v.solveTable.length;n++)y.push([v.solveTable[n].x,v.solveTable[n].y]),b.push(v.solveTable[n].y),p.push(v.solveTable[n].x);return e.series[0].data=y,e.series[1].data=[[0,Math.min(b)],[Math.max(p),Math.max(b)]],v.graphics=e,v};return{options:function(e,o,l){var s={resolve:"/js/math/adjust_curve/view_minium_square.html",graphics:"/js/math/adjust_curve/view_graphics.html"};"Mínimos cuadrados"==o&&l(a(e),s)}}});